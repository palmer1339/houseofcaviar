
var StatusBar=function(){var bar,content,Lang=YAHOO.lang,Dom=YAHOO.util.Dom,Event=YAHOO.util.Event;Event.onContentReady('status-bar',function(){bar=this;var arEl=Dom.getElementsByClassName('content',undefined,bar);content=arEl.length?content=arEl[0]:bar.appendChild(document.createElement('div'))
Event.on(bar,'click',function(e){var target=Event.getTarget(e);Dom.hasClass(target,'close')&&StatusBar.close();Dom.hasClass(target,'hold')&&StatusBar.stopTimer();});});return{timer:null,set:function(o){if(bar&&content&&Lang.isObject(o)){Dom.setAttribute(bar,'class',o.type||'success');content.innerHTML=o.msg||'';this.startTimer(o.time||20000);}},close:function(){if(bar){;Dom.setAttribute(bar,'class','');content.innerHTML='';this.stopTimer();}},startTimer:function(t){this.stopTimer();this.timer=Lang.later(t,this,this.close);},stopTimer:function(){if(this.timer){this.timer.cancel();this.timer=null;}}};}();